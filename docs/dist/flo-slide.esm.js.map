{"version":3,"file":"flo-slide.esm.js","sources":["../src/modules/utils.js","../src/modules/scrollbar.js","../src/modules/arrows.js","../src/modules/dots.js","../src/modules/clickDrag.js","../src/index.js"],"sourcesContent":["const addNamedEventListener = (eventName, data, element, handler) => {\n  element.addEventListener(eventName, handler)\n  data.eventListeners[eventName] = data.eventListeners[eventName] || []\n  data.eventListeners[eventName].push({ element, handler })\n}\n\nconst removeNamedEventListener = (eventName, data) => {\n  if (data.eventListeners[eventName]) {\n    data.eventListeners[eventName].forEach(({ element, handler }) => {\n      element.removeEventListener(eventName, handler)\n    })\n    delete data.eventListeners[eventName]\n  }\n}\n\nconst debounce = (func, wait = 250, immediate = false) => {\n  let timeout\n  return function (...args) {\n    const later = () => {\n      timeout = null\n      if (!immediate) func.apply(this, args) // Call func only if not immediate\n    }\n    const callNow = immediate && !timeout\n    clearTimeout(timeout)\n    timeout = setTimeout(later, wait)\n    if (callNow) func.apply(this, args) // Call func immediately if required\n  }\n}\n\nconst getConfigForBreakpoint = data => {\n  const key = Math.max(...Object.keys(data.config).filter(breakpoint => window.innerWidth >= breakpoint))\n  data.currentBreakpoint = key\n  return data.config[key]\n}\n\nconst getChildWidthFromParent = (data) => {\n  const { slidesToShow } = getConfigForBreakpoint(data)\n  return data.els.scrollTrack.offsetWidth / slidesToShow\n}\n\nexport {\n  debounce,\n  getConfigForBreakpoint,\n  getChildWidthFromParent,\n  addNamedEventListener,\n  removeNamedEventListener }\n","import { debounce, getChildWidthFromParent, addNamedEventListener } from './utils'\n/**\n * Module for optional Scrollbar\n */\n\nconst addScrollbarMouseControl = els => {\n  const { scrollTrack, scrollbarThumb, scrollbar, gallery } = els\n  let isDragging = false\n  let startCursorPos, containerOffsetLeft, scrollbarScrollableWidth\n\n  const onMouseDown = (e) => {\n    if (e.target === scrollbarThumb) {\n      isDragging = true\n      containerOffsetLeft = scrollbar.getBoundingClientRect().left\n      scrollbarScrollableWidth = scrollbar.offsetWidth - scrollbarThumb.offsetWidth\n      startCursorPos = e.pageX - containerOffsetLeft - scrollbarThumb.offsetLeft\n      gallery.classList.add('no-select')\n    }\n  }\n\n  const onMouseMove = debounce((e) => {\n    if (!isDragging) return\n    e.preventDefault()\n    const nowCursorPos = e.pageX - containerOffsetLeft\n    const nowOffset = (nowCursorPos - startCursorPos)\n    let percentageScrolled = nowOffset / scrollbarScrollableWidth\n    if (percentageScrolled > 1) percentageScrolled = 1\n    if (percentageScrolled < 0) percentageScrolled = 0\n    scrollTrack.scrollLeft = percentageScrolled * (scrollTrack.scrollWidth - scrollTrack.clientWidth)\n  }, 10, true)\n\n  const onMouseUp = (e) => {\n    isDragging = false\n    els.gallery.classList.remove('no-select')\n  }\n  scrollbarThumb.addEventListener('mousedown', onMouseDown)\n  document.addEventListener('mousemove', onMouseMove)\n  document.addEventListener('mouseup', onMouseUp)\n}\n\nconst addScrollbarKeyboardControl = data => {\n  const { scrollTrack, scrollbarThumb } = data.els\n  scrollbarThumb.addEventListener('keydown', e => {\n    const childWidth = getChildWidthFromParent(data)\n    if (e.key === 'ArrowLeft') scrollTrack.scrollLeft = Math.max(scrollTrack.scrollLeft - childWidth, 0)\n    if (e.key === 'ArrowRight') scrollTrack.scrollLeft = Math.min(scrollTrack.scrollLeft + childWidth, scrollTrack.scrollWidth - scrollTrack.clientWidth)\n  })\n}\n\nconst setScrollbarPosition = els => {\n  const { scrollTrack, scrollbarThumb } = els\n  const scrollTrackWidth = scrollTrack.scrollWidth\n  const scrollTrackClientWidth = scrollTrack.clientWidth\n  const scrollLeft = scrollTrack.scrollLeft\n  const thumbWidth = scrollTrackClientWidth / scrollTrackWidth\n  const scrollTrackPosition = scrollLeft / (scrollTrackWidth - scrollTrackClientWidth)\n  const scrollableWidth = scrollTrackClientWidth * (1 - thumbWidth)\n  scrollbarThumb.style.width = `${Math.round(thumbWidth * 100)}%`\n  scrollbarThumb.setAttribute('aria-valuenow', `${Math.round(scrollTrackPosition * 100)}`)\n  scrollbarThumb.style.left = `${Math.round(scrollTrackPosition * scrollableWidth)}px`\n}\n\nconst buildScrollbar = (data) => {\n  const { uniqueGalleryId, els, els: { scrollTrack, scrollTrackWrapper } } = data\n  const scrollbar = document.createElement('div')\n  scrollbar.classList.add('flo-scrollbar')\n  scrollbar.setAttribute('aria-label', 'Horizontal scrollbar')\n  scrollbar.setAttribute('role', 'scrollbar')\n  scrollbar.setAttribute('aria-controls', uniqueGalleryId)\n  scrollbar.setAttribute('aria-orientation', 'horizontal')\n\n  const scrollbarThumb = document.createElement('div')\n  scrollbarThumb.classList.add('flo-scrollbar-thumb')\n  scrollbarThumb.setAttribute('aria-valuemin', '0')\n  scrollbarThumb.setAttribute('aria-valuemax', '100')\n  scrollbarThumb.setAttribute('aria-valuenow', '0')\n  scrollbarThumb.setAttribute('tabindex', '0')\n\n  scrollbar.appendChild(scrollbarThumb)\n  scrollTrackWrapper.appendChild(scrollbar)\n  els.scrollbar = scrollbar\n  els.scrollbarThumb = scrollbarThumb\n\n  setScrollbarPosition(els)\n  const debounceSetSBPos = debounce(() => setScrollbarPosition(els), 5, true)\n  addNamedEventListener('scroll', data, scrollTrack, debounceSetSBPos)\n  addScrollbarKeyboardControl(data)\n  addScrollbarMouseControl(els)\n}\n\nexport { buildScrollbar }\n","import { getConfigForBreakpoint, getChildWidthFromParent } from './utils'\n\n/**\n * Module for optional Arrows\n */\n\nconst calculateScrollPosition = (direction, data) => {\n  const { slidesToScroll } = getConfigForBreakpoint(data)\n  const { scrollTrack } = data.els\n  const childWidth = getChildWidthFromParent(data)\n  const scrollDirectionMultiplier = direction === 'next' ? 1 : -1\n  let scrollPosition = scrollTrack.scrollLeft\n  let currentOffset = scrollPosition % childWidth\n  currentOffset = currentOffset <= 50 ? 0 : currentOffset\n  currentOffset = childWidth - currentOffset < 1 ? 0 : currentOffset\n  if (currentOffset !== 0) {\n    if (direction === 'next') scrollPosition += (childWidth - currentOffset)\n    if (direction === 'previous') scrollPosition -= currentOffset\n  }\n  scrollPosition += childWidth * slidesToScroll * scrollDirectionMultiplier\n  return scrollPosition\n}\n\n// ARROW METHODS\nconst handleArrowClick = (direction, data) => {\n  const { fade } = getConfigForBreakpoint(data)\n  const { scrollTrack } = data.els\n  const scrollPosition = calculateScrollPosition(direction, data)\n  if (fade) {\n    scrollTrack.style.opacity = '0'\n    setTimeout(() => {\n      scrollTrack.scroll({\n        left: scrollPosition,\n        top: 0,\n        behavior: 'auto'\n      })\n      scrollTrack.style.opacity = '1'\n    }, 400)\n  } else {\n    scrollTrack.scroll({\n      left: scrollPosition,\n      top: 0,\n      behavior: 'smooth'\n    })\n  }\n}\n\nconst buildArrow = (direction, arrowHtml, data) => {\n  const { slidesToScroll } = getConfigForBreakpoint(data)\n  const arrow = document.createElement('button')\n  arrow.innerHTML = arrowHtml\n  arrow.classList.add('arrow', `${direction.toLowerCase()}-arrow`)\n  arrow.setAttribute('aria-controls', data.uniqueGalleryId)\n  arrow.setAttribute('aria-label', `Show ${direction} ${slidesToScroll} slides`)\n  return arrow\n}\n\nconst buildArrows = data => {\n  const { els, arrowHtml } = data\n  const { customArrows } = getConfigForBreakpoint(data)\n  const html = customArrows === '' ? '' : customArrows || arrowHtml\n  const nextArrow = buildArrow('next', html, data)\n  const previousArrow = buildArrow('previous', html, data)\n  data.els.arrows = {\n    next: nextArrow,\n    previous: previousArrow\n  }\n  els.gallery.prepend(nextArrow)\n  els.gallery.prepend(previousArrow)\n  nextArrow.addEventListener('click', () => handleArrowClick('next', data))\n  previousArrow.addEventListener('click', () => handleArrowClick('previous', data))\n}\n\nexport { buildArrows, handleArrowClick }\n","import { getConfigForBreakpoint, getChildWidthFromParent, addNamedEventListener } from './utils'\n\n/**\n * Module for optional Dots\n */\n\nconst updateActiveDot = data => {\n  const { slidesToScroll } = getConfigForBreakpoint(data)\n  const { scrollTrack, dots } = data.els\n  const childWidth = getChildWidthFromParent(data)\n  const slidePosIndex = Math.round(scrollTrack.scrollLeft / childWidth)\n  const activeIndex = Math.floor(slidePosIndex / slidesToScroll)\n  dots.forEach((dot, i) => dot.classList.toggle('active', i === activeIndex))\n}\n\nconst buildDots = data => {\n  const { scrollTrack, slides, scrollTrackWrapper } = data.els\n  const { slidesToScroll, slidesToShow } = getConfigForBreakpoint(data)\n\n  // Calculate dots needed considering both slidesToShow and slidesToScroll\n  const remainingSlides = slides.length - slidesToShow\n  const numDots = Math.ceil(remainingSlides / slidesToScroll) + 1\n\n  const dotContainer = document.createElement('div')\n  dotContainer.classList.add('flo-dots')\n\n  for (let i = 0; i < numDots; i++) {\n    const dot = document.createElement('button')\n    dot.classList.add('flo-dot')\n    const slideIndex = i * slidesToScroll + 1\n    const lastSlideInGroup = Math.min(slideIndex + slidesToShow - 1, slides.length)\n    dot.setAttribute('aria-label', `Go to slides ${slideIndex}-${lastSlideInGroup}`)\n    dotContainer.appendChild(dot)\n    dot.addEventListener('click', () => {\n      scrollTrack.scroll({\n        left: i * getChildWidthFromParent(data) * slidesToScroll,\n        top: 0,\n        behavior: 'smooth'\n      })\n    })\n  }\n\n  addNamedEventListener('scrollend', data, scrollTrack, () => updateActiveDot(data))\n  scrollTrackWrapper.appendChild(dotContainer)\n  data.els.dots = dotContainer.querySelectorAll('.flo-dot')\n  updateActiveDot(data)\n}\n\nexport { buildDots }\n","let isDragging = false\nlet isClick = false\nlet startX, scrollLeft, clickStartTime\n\nconst handleMouseDown = (e, scrollTrack) => {\n  if (e.button !== 0) return\n  clickStartTime = Date.now()\n  isDragging = true\n  startX = e.pageX - scrollTrack.offsetLeft\n  scrollLeft = scrollTrack.scrollLeft\n}\n\nconst handleMouseUpAndLeave = e => {\n  if (e.button !== 0) return\n  isDragging = false\n  isClick = Date.now() - clickStartTime < 350\n  const clickableParent = e.target.closest('a, button')\n  const tagName = e.target.tagName.toLowerCase()\n  const classNames = [...e.target.classList]\n  if (!isClick) {\n    e.preventDefault()\n  } else if (isClick && tagName === 'a') {\n    e.target.click()\n  } else if (isClick && tagName === 'button') {\n    if (!classNames.includes('play-pause-button')) { e.target.click() }\n  } else if (isClick && clickableParent) {\n    clickableParent.click()\n  }\n  clickStartTime = null\n}\n\nconst move = (e, scrollTrack) => {\n  if (!isDragging) return\n  e.preventDefault()\n  const x = e.pageX - scrollTrack.offsetLeft\n  const walk = x - startX\n  scrollTrack.scrollLeft = scrollLeft - walk\n}\n\nconst handleClick = e => { isClick = false }\n\nconst addClickDrag = (data) => {\n  const { scrollTrack } = data.els\n  scrollTrack.addEventListener('click', handleClick)\n  scrollTrack.addEventListener('mousedown', (e) => handleMouseDown(e, scrollTrack))\n  scrollTrack.addEventListener('mousemove', (e) => move(e, scrollTrack))\n  scrollTrack.addEventListener('mouseup', handleMouseUpAndLeave)\n  scrollTrack.addEventListener('mouseleave', handleMouseUpAndLeave)\n}\n\nexport { addClickDrag }\n","import {\n  debounce,\n  getConfigForBreakpoint,\n  addNamedEventListener,\n  removeNamedEventListener\n} from './modules/utils'\nimport { buildScrollbar } from './modules/scrollbar'\nimport { buildArrows } from './modules/arrows'\nimport { buildDots } from './modules/dots'\nimport { addClickDrag } from './modules/clickDrag'\n\n/**\n * floSlide Carousel Library V0.95\n * @example\n *\n * // BASIC\n * floSlide('.js-mcp-recs-horizontal-12345')\n *\n * // KITCHEN SINK\n * floSlide('.js-mcp-recs-horizontal-12345', {\n *   slidesToShow: 2,\n *   slidesToScroll: 2,\n *   fade: false,\n *   arrows: true,\n *   dots: true,\n *   scrollbar: true,\n *   clickDrag: false,\n *   customArrows: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path fill=\"#000000\" fill-rule=\"evenodd\" d=\"M14.5 18.5 21 12l-6.5-6.5-.707.707 5.293 5.293H3v1h16.087l-5.294 5.293.707.707Z\" clip-rule=\"evenodd\"/></svg>',\n *   responsive: {\n *     767: {\n *       slidesToShow: 4,\n *       slidesToScroll: 4\n *     },\n *     1169: {\n *       slidesToShow: 5,\n *       slidesToScroll: 5,\n *       scrollbar: false\n *     }\n *   }\n * })\n */\n\nclass floSlideCore {\n  constructor(selector, gallery, config) {\n    this.data = {\n      selector,\n      config: this.mergeDefaults(config),\n      els: {\n        gallery,\n        slides: []\n      },\n      eventListeners: [],\n      uniqueGalleryId: this.createUniqueGalleryId(),\n      arrowHtml:\n        '<div style=\"transform: rotate(-45deg);height:15px;width:15px;border-right:2px solid grey;border-bottom: 2px solid grey\"></div>'\n    }\n    this.init()\n  }\n\n  createUniqueGalleryId() {\n    const date = Date.now()\n    const id = `flo-gallery-${date}`\n    if (window.FloSlideData.instances) {\n      const instanceIndex = window.FloSlideData.instances.findIndex(\n        (instance) => {\n          return instance.data.uniqueGalleryId === id\n        }\n      )\n      if (instanceIndex > -1) {\n        return this.createUniqueGalleryId()\n      }\n    }\n    return id\n  }\n\n  mergeDefaults(config) {\n    const defaultConfig = {\n      slidesToShow: 3.25,\n      slidesToScroll: 1,\n      arrows: false,\n      fade: false,\n      scrollbar: true,\n      clickDrag: true,\n      dots: false,\n      customArrows: null,\n      hideInactiveArrows: true,\n      breakpointReinit: true,\n      responsive: {\n        // TODO: responsive default css not generating from this currently\n        // 600: {\n        //   slidesToShow: 1.5,\n        //   slidesToScroll: 1,\n        //   arrows: true,\n        //   dots: false\n        // },\n        // 1028: {\n        //   slidesToShow: 4,\n        //   slidesToScroll: 4\n        // }\n      }\n    }\n\n    const newConfig = { ...config }\n    newConfig.responsive = newConfig.responsive || {}\n    const baseConfig = { ...defaultConfig, ...newConfig }\n\n    // Ensure slidesToScroll doesn't exceed slidesToShow in base config\n    baseConfig.slidesToScroll = Math.min(baseConfig.slidesToScroll, baseConfig.slidesToShow)\n\n    Object.keys(baseConfig.responsive).forEach((breakpoint) => {\n      newConfig.responsive[breakpoint] = {\n        ...baseConfig,\n        ...newConfig.responsive[breakpoint]\n      }\n      // Ensure slidesToScroll doesn't exceed slidesToShow in responsive configs\n      newConfig.responsive[breakpoint].slidesToScroll = Math.min(\n        newConfig.responsive[breakpoint].slidesToScroll,\n        newConfig.responsive[breakpoint].slidesToShow\n      )\n    })\n    return { 0: baseConfig, ...newConfig.responsive }\n  }\n\n  getChildWidthFromParent(parent) {\n    const { slidesToShow } = getConfigForBreakpoint(this.data)\n    return parent.offsetWidth / slidesToShow\n  }\n\n  setArrowVisibility() {\n    const { hideInactiveArrows } = getConfigForBreakpoint(this.data)\n    const {\n      arrows: { previous, next },\n      firstSlide,\n      lastSlide\n    } = this.data.els\n    if (!hideInactiveArrows) return\n    const isFirstSlideVisible =\n      firstSlide.getAttribute('aria-hidden') === 'false'\n    const isLastSlideVisible =\n      lastSlide.getAttribute('aria-hidden') === 'false'\n    previous.style.visibility = isFirstSlideVisible ? 'hidden' : 'visible'\n    next.style.visibility = isLastSlideVisible ? 'hidden' : 'visible'\n    previous.setAttribute(\n      'aria-disabled',\n      `${isFirstSlideVisible ? 'true' : 'false'}`\n    )\n    next.setAttribute(\n      'aria-disabled',\n      `${isLastSlideVisible ? 'true' : 'false'}`\n    )\n  }\n\n  slideIsVisible(el, percentageVisible = 0.9) {\n    const rect = el.getBoundingClientRect()\n    const parentRect = el.parentElement.getBoundingClientRect()\n    const intersectionHeight = Math.max(\n      0,\n      Math.min(rect.bottom, parentRect.bottom) -\n      Math.max(rect.top, parentRect.top)\n    )\n    const intersectionWidth = Math.max(\n      0,\n      Math.min(rect.right, parentRect.right) -\n      Math.max(rect.left, parentRect.left)\n    )\n    const intersectionArea = intersectionHeight * intersectionWidth\n    const moduleArea = (rect.bottom - rect.top) * (rect.right - rect.left)\n    const boolean = intersectionArea >= percentageVisible * moduleArea\n    return boolean\n  }\n\n  setSlideADAVisibility() {\n    this.data.els.slides.forEach((slide, i) => {\n      if (this.slideIsVisible(slide)) {\n        slide.setAttribute('aria-hidden', 'false')\n        // slide.setAttribute('tabindex', '0')\n        slide.removeAttribute('tabindex')\n      } else {\n        slide.setAttribute('aria-hidden', 'true')\n        slide.setAttribute('tabindex', '-1')\n      }\n    })\n  }\n\n  setSlideCssVisibility() {\n    this.data.els.slides.forEach((slide) => {\n      if (!this.slideIsVisible(slide, 0.05)) slide.style.visibility = 'hidden'\n      if (this.slideIsVisible(slide, 0.05)) slide.style.visibility = 'visible'\n    })\n  }\n\n  manageElVisibility() {\n    const { arrows } = getConfigForBreakpoint(this.data)\n    const { slides, scrollTrack } = this.data.els\n    this.setSlideADAVisibility()\n    this.setSlideCssVisibility()\n    if (arrows) this.setArrowVisibility()\n    const debounceSlideAdaVis = debounce(\n      this.setSlideADAVisibility.bind(this),\n      100\n    )\n    const debouceSlideCssVis = debounce(\n      this.setSlideCssVisibility.bind(this),\n      200\n    )\n    const debounceSetArrowVis = debounce(() => {\n      this.setArrowVisibility()\n    }, 150)\n    addNamedEventListener('scroll', this.data, scrollTrack, () => {\n      slides.forEach((slide) => {\n        slide.style.visibility = 'visible'\n      })\n      debounceSlideAdaVis()\n      debouceSlideCssVis()\n      if (arrows) debounceSetArrowVis()\n    })\n  }\n\n  // BREAKPOINT REINIT\n  reinit() {\n    const {\n      data,\n      data: {\n        els,\n        els: { arrows, dots, scrollbar, scrollbarThumb, scrollTrack }\n      }\n    } = this\n    if (arrows) {\n      arrows.next.remove()\n      arrows.previous.remove()\n      delete els.arrows\n    }\n    if (dots) {\n      dots.forEach((dot) => dot.remove())\n      delete els.dots\n    }\n    if (scrollbar) {\n      scrollbar.remove()\n      delete els.scrollbar\n    }\n    if (scrollbarThumb) {\n      scrollbarThumb.remove()\n      delete els.scrollbarThumb\n    }\n    removeNamedEventListener('scroll', data)\n    removeNamedEventListener('scrollend', data)\n    this.buildElements()\n    setTimeout(() => {\n      this.manageElVisibility()\n      scrollTrack.scrollLeft = 1\n      scrollTrack.scrollLeft = 0\n    }, 250)\n  }\n\n  setBreakpointReinit() {\n    const debounceReinit = debounce((e) => this.reinit(), 350)\n    this.data.breakpoints.forEach((breakpoint) => {\n      const mediaQuery = window.matchMedia(`(min-width: ${breakpoint}px)`)\n      mediaQuery.addEventListener('change', debounceReinit)\n    })\n  }\n\n  // INIT METHODS\n  appendCssToHead() {\n    const { uniqueGalleryId, config } = this.data\n    const styleTag = document.createElement('style')\n    styleTag.id = `${uniqueGalleryId}-style`\n    const string = Object.entries(config)\n      .map(([breakpoint, settings]) =>\n        breakpoint === '0'\n          ? `.${uniqueGalleryId} .flo-gallery-track > * { width: ${100 /\n          settings.slidesToShow}%; }`\n          : `@media(min-width: ${breakpoint}px) { .${uniqueGalleryId} .flo-gallery-track > * { width: ${100 /\n          settings.slidesToShow}%; } }`\n      )\n      .join(' ')\n    styleTag.textContent = string\n    document.head.appendChild(styleTag)\n  }\n\n  buildElements() {\n    const {\n      arrows,\n      scrollbar,\n      dots,\n      clickDrag,\n      breakpointReinit\n    } = getConfigForBreakpoint(this.data)\n    const {\n      els: { gallery, slides },\n      uniqueGalleryId\n    } = this.data\n    const isFirstInit = !this.data.els.scrollTrack\n    if (isFirstInit) {\n      // Create required elements\n      const scrollTrack = document.createElement('div')\n      const scrollTrackWrapper = document.createElement('div')\n      scrollTrack.append(...this.data.els.slides)\n      scrollTrackWrapper.append(scrollTrack)\n      gallery.insertAdjacentElement('afterbegin', scrollTrackWrapper)\n      this.data.els.scrollTrack = scrollTrack\n      this.data.els.scrollTrackWrapper = scrollTrackWrapper\n      scrollTrack.id = uniqueGalleryId\n      scrollTrack.classList.add('flo-gallery-track')\n      scrollTrackWrapper.classList.add('flo-gallery-track-wrapper')\n      slides.forEach((slide, i) => {\n        slide.classList.add('flo-slide')\n      })\n      this.data.breakpoints = Object.keys(this.data.config)\n      if (breakpointReinit && this.data.breakpoints.length > 1) {\n        this.setBreakpointReinit()\n      }\n    }\n    // Create Optional Elements\n    if (clickDrag) addClickDrag(this.data)\n    if (scrollbar) setTimeout(() => buildScrollbar(this.data), 1000)\n    if (arrows) buildArrows(this.data)\n    if (dots) buildDots(this.data)\n  }\n\n  init() {\n    if (!this.data.els.gallery) {\n      return console.warn(\n        `floSlide: No elements found matching selector \"${this.data.selector}\".`\n      )\n    }\n    // Adds attributes to the root gallery for ADA compliance\n    this.data.els.gallery.setAttribute('role', 'region')\n    this.data.els.gallery.setAttribute('aria-roledescription', 'carousel')\n    this.data.els.gallery.setAttribute('aria-label', 'Marketing')\n\n    this.data.els.gallery.classList.add(\n      'flo-gallery',\n      this.data.uniqueGalleryId\n    )\n    this.data.els.slides = [...this.data.els.gallery.children]\n    this.data.els.firstSlide = this.data.els.slides[0]\n    this.data.els.lastSlide = this.data.els.slides[\n      this.data.els.slides.length - 1\n    ]\n    this.appendCssToHead()\n    this.buildElements()\n    setTimeout(() => {\n      this.manageElVisibility()\n      this.data.els.gallery.classList.add('flo-slider-loaded')\n    }, 1000)\n  }\n}\n\n/**\n * Main function, also allows for multiple gallery inits with one selector.\n */\nconst FloSlide = (selector, config = {}) => {\n  const galleries = document.querySelectorAll(selector)\n  if (galleries.length === 0) return\n  window.FloSlideData = window.FloSlideData || {}\n  window.FloSlideData.instances = window.FloSlideData.instances || []\n\n  galleries.forEach((currentGalleryElement) => {\n    if (currentGalleryElement.dataset.floSlideInitialized === 'true') {\n      return\n    }\n    const instanceExistsForElement = window.FloSlideData.instances.some(\n      (instance) => instance.galleryDomElement === currentGalleryElement\n    )\n\n    if (instanceExistsForElement) {\n      currentGalleryElement.dataset.floSlideInitialized = 'true'\n      return\n    }\n    currentGalleryElement.dataset.floSlideInitialized = 'true'\n\n    const newInstance = new floSlideCore(selector, currentGalleryElement, config)\n    window.FloSlideData.instances.push(newInstance)\n  })\n}\n\nexport default FloSlide\n"],"names":["addNamedEventListener","eventName","data","element","handler","addEventListener","eventListeners","push","removeNamedEventListener","forEach","_ref","removeEventListener","debounce","func","wait","arguments","length","undefined","immediate","timeout","_this","_len","args","Array","_key","later","apply","callNow","clearTimeout","setTimeout","getConfigForBreakpoint","key","Math","max","_toConsumableArray","Object","keys","config","filter","breakpoint","window","innerWidth","currentBreakpoint","getChildWidthFromParent","_getConfigForBreakpoi","slidesToShow","els","scrollTrack","offsetWidth","addScrollbarMouseControl","scrollbarThumb","scrollbar","gallery","isDragging","startCursorPos","containerOffsetLeft","scrollbarScrollableWidth","onMouseDown","e","target","getBoundingClientRect","left","pageX","offsetLeft","classList","add","onMouseMove","preventDefault","nowCursorPos","nowOffset","percentageScrolled","scrollLeft","scrollWidth","clientWidth","onMouseUp","remove","document","addScrollbarKeyboardControl","_data$els","childWidth","min","setScrollbarPosition","scrollTrackWidth","scrollTrackClientWidth","thumbWidth","scrollTrackPosition","scrollableWidth","style","width","concat","round","setAttribute","buildScrollbar","uniqueGalleryId","_data$els2","scrollTrackWrapper","createElement","appendChild","debounceSetSBPos","calculateScrollPosition","direction","slidesToScroll","scrollDirectionMultiplier","scrollPosition","currentOffset","handleArrowClick","_getConfigForBreakpoi2","fade","opacity","scroll","top","behavior","buildArrow","arrowHtml","_getConfigForBreakpoi3","arrow","innerHTML","toLowerCase","buildArrows","_getConfigForBreakpoi4","customArrows","html","nextArrow","previousArrow","arrows","next","previous","prepend","updateActiveDot","dots","slidePosIndex","activeIndex","floor","dot","i","toggle","buildDots","slides","remainingSlides","numDots","ceil","dotContainer","_loop","slideIndex","lastSlideInGroup","querySelectorAll","isClick","startX","clickStartTime","handleMouseDown","button","Date","now","handleMouseUpAndLeave","clickableParent","closest","tagName","classNames","click","includes","move","x","walk","handleClick","addClickDrag","floSlideCore","selector","_classCallCheck","mergeDefaults","createUniqueGalleryId","init","_createClass","value","date","id","FloSlideData","instances","instanceIndex","findIndex","instance","defaultConfig","clickDrag","hideInactiveArrows","breakpointReinit","responsive","newConfig","_objectSpread","baseConfig","parent","setArrowVisibility","_this$data$els","_this$data$els$arrows","firstSlide","lastSlide","isFirstSlideVisible","getAttribute","isLastSlideVisible","visibility","slideIsVisible","el","percentageVisible","rect","parentRect","parentElement","intersectionHeight","bottom","intersectionWidth","right","intersectionArea","moduleArea","boolean","setSlideADAVisibility","slide","removeAttribute","setSlideCssVisibility","_this2","manageElVisibility","_this3","_this$data$els2","debounceSlideAdaVis","bind","debouceSlideCssVis","debounceSetArrowVis","reinit","_this4","_this$data","_this$data$els3","buildElements","setBreakpointReinit","_this5","debounceReinit","breakpoints","mediaQuery","matchMedia","appendCssToHead","_this$data2","styleTag","string","entries","map","_ref2","_slicedToArray","settings","join","textContent","head","_this6","_this$data3","_this$data3$els","isFirstInit","append","insertAdjacentElement","_this7","console","warn","children","FloSlide","galleries","currentGalleryElement","dataset","floSlideInitialized","instanceExistsForElement","some","galleryDomElement","newInstance"],"mappings":"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"}